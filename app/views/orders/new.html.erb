<% if flash[:alert].present? %>
  <div class="alert alert-danger">
    <%= flash[:alert] %>
  </div>
<% end %>

<h1>🚚注文情報を入力してください🚚</h1>

<%= form_with(model: @order, local: true, url: confirm_orders_path, method: :get) do |form| %>
  <% if @order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@order.errors.count, "error") %> prohibited this order from being saved:</h2>
      <ul>
      <% @order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <% @books.each do |book| %>
      <div class="book-info">
        <p>
          <strong>タイトル：</strong>
          <%= book.title %>
          <br>
          <strong>数量：</strong>
          <%= form.text_field :count, name: "order[count][]", value: LineItem.find_by(cart_id: @current_cart, book_id: book.id).quantity %>
        </p>
<div class="field">
    <%= form.hidden_field :book_id, value: book.id, name: 'order[book_ids][]' %>
  </div>

<% end %>



  <br>
    <div class="field">
      <%= form.label :お届け先住所 %>
      <%= form.text_field :address %>
    </div>

    <div class="actions">
      <%= form.submit "次へ進む" %>
    </div>
  </br>
<% end %>


<% flash.each do |type, message| %>
  <div class="alert alert-<%= type %>">
    <%= message %>
  </div>
<% end %>

